<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8 />
    <title>  Technetium |  David Leonard | Engineer</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/pygment_trac.css">
    <link rel="stylesheet" href="/css/jquery.bxslider.css" />
    <link rel="stylesheet" href="/bootstrap/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="/fontAwesome/css/font-awesome.min.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script src="/js/jquery.bxslider.min.js"></script>
</head>

<body>
    <div class="wrapper">
        <header>
        <img src="/img/banner.jpg" />
        

        <nav role="navigation">
            <ul>
                <li><a href="/about/">About</a></li>
                <li><a href="/portfolio/">Portfolio</a></li>
                <li><a href="/blog/">Blog</a></li>
                <li><a href="/progress/">In Progress</a></li>
            </ul>
        </nav>


        </header>

        <div class="wrapper">
        <section>
        <h2 class="content">Technetium</h2>

          <p class="post-meta">
                01 Apr 2014
          </p>



        <img src="/img/technetium/graph.png" />
        <p>Technetium is a Bitbucket Data aggregation tool built using Bitbucket’s RESTful API. Features a centalized issue tracker, repository subscription manager, and reports/graphs which enumerates the commit/issue activity of each user in a subscribed repository.</p>

<h4 id="conception">Conception</h4>

<p>As required from my Web Design class which I took in Fall 2013, a web application had to be built using either Django, Flask or Pyramid. After spending a few weeks in the Summer brainstorming various API’s to use in our project, my team of two came across the Bitbucket API - it provided a rich set of endpoints and methods for accessing various data in a repository.  </p>

<p>Another inspiration for the project was a centralized issue tracker - something that we desperately needed within the research lab I have worked in since Summer 2013. With a 
large amount of web applications being built and numerous issues piling up in each one, it was necessary to create a way for a project manager to easily keep up to date with the progress of each project and to track work being done. As for the name <code>Technetium</code>, it was chosen due to the popularity of naming all of our web applications within the lab based on chemical elements.</p>

<h4 id="organization">Organization</h4>

<p>With only 3 months to work on this project, our team decided it would be best to plan out the lifetime of the project from start to finish in order to completely finish it. While finishing a project within such a short time is unheard of, we were determined to put our best foot forward. After many days of planning, we decided that Django would be the best framework for this project, considering we would need models and an OAuth library that has not been deprecated. To finish our targeted feature (our centralized issue tracker), we constructed the following roadmap:</p>

<ul>
  <li>Find and configure an OAuth protocol, which is necessary by Bitbucket’s API to access private repository data.</li>
  <li>Create a module containing methods allowing the user to subscribe to any repository which they have read-access to on Bitbucket.</li>
  <li>Create a module containing methods for grabbing all issue data within all subscribed repositories.</li>
  <li>Write a set of parsers for preparing the returned issue JSON data, as well as the templates needed to render it properly.</li>
  <li>Find and hook up an admin theme (preferrably built with Bootstrap)</li>
</ul>

<p>During the lifetime of this project, we agreed to strictly follow good software engineering practices - <strong>D</strong><strong>R</strong><strong>Y</strong> (Don’t Repeat Yourself), as well as Agile/Scrum methdologies for managing the tasks. To make sure our code remainded readable and modular, refactoring was done every 2 weeks before new features were added.</p>

<h4 id="new-features">New Features</h4>

<p>After only a month of work, we managed to finish our main feature - the centralized issue tracker, shown in the screenshots below: </p>

<p><img src="/img/technetium/manager.png" alt="Technetium Repository Manager" />
<img src="/img/technetium/tracker.png" alt="Centralized Issue Tracker" /></p>

<p>As seen from the screenshot above, the centralized issue tracker is able to display up to 10 issues at a time from all subscribed repositories on a single page. By clicking the <code>show more</code>
button, another 10 issues would appear through the use of AJAX - making the issue tracker responsive and fast.</p>

<p>Motiviation was still high and there were still 2 months left until production day, leading our team to pursue a new feature: <code>reports</code>. These reports would have the following features:</p>

<ul>
  <li>Commit/Issue tallies for all users in a selected repository.</li>
  <li>Tallies of issue comments of all users in a selected repository.</li>
  <li>Various graphs to visualize commit/issue data, built using Django D3.</li>
</ul>

<h4 id="interesting-code-snippets">Interesting Code Snippets</h4>

<p>The following screenshots contains some code snippets that I found particularly fun to work on. </p>

<p>Starting with the methods for parsing issues in a repository:</p>

<div class="highlight"><pre><code class="python"><span class="lineno"> 1</span>     <span class="k">def</span> <span class="nf">parse_all_issues</span><span class="p">(</span><span class="n">repo_issues</span><span class="p">):</span>
<span class="lineno"> 2</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno"> 3</span> <span class="sd">    Parses returned JSON data from the bitbucket API</span>
<span class="lineno"> 4</span> <span class="sd">    response for the technetium issues dashboard.</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span> <span class="sd">    Parameters:</span>
<span class="lineno"> 7</span> <span class="sd">    - repo_issues: List (Dictionaries of JSON issues)</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="sd">    Returns: List</span>
<span class="lineno">10</span> <span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">11</span>     <span class="c"># List of repositories, which contains list of parsed issues</span>
<span class="lineno">12</span>     <span class="n">issues_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="lineno">13</span>     <span class="k">for</span> <span class="n">repo</span> <span class="ow">in</span> <span class="n">repo_issues</span><span class="p">:</span>
<span class="lineno">14</span>         <span class="k">if</span> <span class="s">&#39;issues&#39;</span> <span class="ow">in</span> <span class="n">repo</span><span class="p">:</span>
<span class="lineno">15</span>             <span class="n">issues_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parse_issues</span><span class="p">(</span><span class="n">repo</span><span class="p">[</span><span class="s">&#39;issues&#39;</span><span class="p">]))</span>
<span class="lineno">16</span>         <span class="k">else</span><span class="p">:</span>
<span class="lineno">17</span>             <span class="n">issues_list</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
<span class="lineno">18</span>     <span class="k">return</span> <span class="n">issues_list</span>
<span class="lineno">19</span> 
<span class="lineno">20</span> 
<span class="lineno">21</span> <span class="k">def</span> <span class="nf">parse_issues</span><span class="p">(</span><span class="n">issues</span><span class="p">):</span>
<span class="lineno">22</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">23</span> <span class="sd">    Parse issues from Dictionary</span>
<span class="lineno">24</span> 
<span class="lineno">25</span> <span class="sd">    Parameters:</span>
<span class="lineno">26</span> <span class="sd">    - issues: List</span>
<span class="lineno">27</span> 
<span class="lineno">28</span> <span class="sd">    Returns: List</span>
<span class="lineno">29</span> <span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">30</span>     <span class="n">parsed_issues</span> <span class="o">=</span> <span class="p">[]</span>
<span class="lineno">31</span>     <span class="c"># No issues in repository</span>
<span class="lineno">32</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">issues</span><span class="p">:</span>
<span class="lineno">33</span>         <span class="k">return</span> <span class="n">parsed_issues</span>
<span class="lineno">34</span> 
<span class="lineno">35</span>     <span class="c"># Parse issue information</span>
<span class="lineno">36</span>     <span class="k">for</span> <span class="n">issue</span> <span class="ow">in</span> <span class="n">issues</span><span class="p">:</span>
<span class="lineno">37</span>         <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="lineno">38</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="lineno">39</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="lineno">40</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;metadata&#39;</span><span class="p">][</span><span class="s">&#39;kind&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="lineno">41</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;priority&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;priority&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<span class="lineno">42</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;created&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bitmethods</span><span class="o">.</span><span class="n">format_timestamp</span><span class="p">(</span><span class="n">issue</span><span class="p">[</span><span class="s">&#39;utc_created_on&#39;</span><span class="p">])</span>
<span class="lineno">43</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;issues_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;#&quot;</span>
<span class="lineno">44</span> 
<span class="lineno">45</span>         <span class="c"># Parse assignee</span>
<span class="lineno">46</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;assignee&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="lineno">47</span>         <span class="n">data</span><span class="p">[</span><span class="s">&#39;assignee_avatar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
<span class="lineno">48</span>         <span class="k">if</span> <span class="s">&#39;responsible&#39;</span> <span class="ow">in</span> <span class="n">issue</span><span class="p">:</span>
<span class="lineno">49</span>             <span class="n">data</span><span class="p">[</span><span class="s">&#39;assignee&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;responsible&#39;</span><span class="p">][</span><span class="s">&#39;display_name&#39;</span><span class="p">]</span>
<span class="lineno">50</span>             <span class="n">data</span><span class="p">[</span><span class="s">&#39;assignee_avatar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">issue</span><span class="p">[</span><span class="s">&#39;responsible&#39;</span><span class="p">][</span><span class="s">&#39;avatar&#39;</span><span class="p">]</span>
<span class="lineno">51</span>         <span class="n">parsed_issues</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="lineno">52</span>     <span class="k">return</span> <span class="n">parsed_issues</span>
</code></pre></div>

<p>The next one was particularly interesting to work on - generating the line graphs for commit data in a repository. </p>

<div class="highlight"><pre><code class="python"><span class="lineno"> 1</span> <span class="k">def</span> <span class="nf">commits_linegraph</span><span class="p">(</span><span class="n">changesets</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
<span class="lineno"> 2</span>     <span class="sd">&quot;&quot;&quot;</span>
<span class="lineno"> 3</span> <span class="sd">    Bitbucket has a inconsistent design where if your repo has</span>
<span class="lineno"> 4</span> <span class="sd">    less than 50 commits, they are returned in oldest commits first.</span>
<span class="lineno"> 5</span> <span class="sd">    If your repo has more than 50 commits, the commits are returned</span>
<span class="lineno"> 6</span> <span class="sd">    in most recent commits first.</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="sd">    Algorithm to parse commits linegraph</span>
<span class="lineno"> 9</span> <span class="sd">    1. Get the timestamp of first and most recent commit</span>
<span class="lineno">10</span> <span class="sd">    2. Split the x-axis regions into date ranges</span>
<span class="lineno">11</span> <span class="sd">    3. For each commit, parse each user&#39;s timestamp to unix time</span>
<span class="lineno">12</span> <span class="sd">    4. Create a data series for each user based on date ranges</span>
<span class="lineno">13</span> 
<span class="lineno">14</span> <span class="sd">    Improvements:</span>
<span class="lineno">15</span> <span class="sd">    ** [done] Fix nb_element issue</span>
<span class="lineno">16</span> <span class="sd">    1. [done] Refactoring into smaller functions</span>
<span class="lineno">17</span> <span class="sd">    2. [done] Optimize number of elements</span>
<span class="lineno">18</span> 
<span class="lineno">19</span> <span class="sd">    ** Fix backwards order of linegraph for &lt; 50 commits</span>
<span class="lineno">20</span> <span class="sd">    ** Fix cutoff date end</span>
<span class="lineno">21</span> <span class="sd">    3. Improve search algorithm</span>
<span class="lineno">22</span> 
<span class="lineno">23</span> <span class="sd">    Returns:</span>
<span class="lineno">24</span> <span class="sd">        Dictionary</span>
<span class="lineno">25</span> <span class="sd">    &quot;&quot;&quot;</span>
<span class="lineno">26</span>     <span class="c"># Fixed issues with count of 1 or less</span>
<span class="lineno">27</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">count</span><span class="p">:</span>
<span class="lineno">28</span>         <span class="k">return</span> <span class="p">{}</span>
<span class="lineno">29</span> 
<span class="lineno">30</span>     <span class="c"># Initialize start and end timestamp</span>
<span class="lineno">31</span>     <span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
<span class="lineno">32</span> 
<span class="lineno">33</span>     <span class="c"># Handle bitbucket&#39;s inconsistent commits ordering</span>
<span class="lineno">34</span>     <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="mi">50</span><span class="p">:</span>
<span class="lineno">35</span>         <span class="n">start_time</span> <span class="o">=</span> <span class="n">bitmethods</span><span class="o">.</span><span class="n">to_unix_time</span><span class="p">(</span><span class="n">changesets</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;timestamp&#39;</span><span class="p">])</span>
<span class="lineno">36</span>         <span class="n">end_time</span> <span class="o">=</span> <span class="n">bitmethods</span><span class="o">.</span><span class="n">to_unix_time</span><span class="p">(</span><span class="n">changesets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;timestamp&#39;</span><span class="p">])</span>
<span class="lineno">37</span>     <span class="k">else</span><span class="p">:</span>
<span class="lineno">38</span>         <span class="n">start_time</span> <span class="o">=</span> <span class="n">bitmethods</span><span class="o">.</span><span class="n">to_unix_time</span><span class="p">(</span><span class="n">changesets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;timestamp&#39;</span><span class="p">])</span>
<span class="lineno">39</span>         <span class="n">end_time</span> <span class="o">=</span> <span class="n">bitmethods</span><span class="o">.</span><span class="n">to_unix_time</span><span class="p">(</span><span class="n">changesets</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;timestamp&#39;</span><span class="p">])</span>
<span class="lineno">40</span> 
<span class="lineno">41</span>     <span class="c"># Set limit on amount of time regions</span>
<span class="lineno">42</span>     <span class="n">nb_element</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_time</span><span class="o">-</span><span class="n">start_time</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">86400</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span>
<span class="lineno">43</span>     <span class="k">if</span> <span class="n">nb_element</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
<span class="lineno">44</span>         <span class="n">nb_element</span> <span class="o">=</span> <span class="mi">60</span>
<span class="lineno">45</span>     <span class="k">elif</span> <span class="n">nb_element</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
<span class="lineno">46</span>         <span class="n">nb_element</span> <span class="o">=</span> <span class="mi">10</span>
<span class="lineno">47</span> 
<span class="lineno">48</span>     <span class="c"># Get xdata for time range of commits</span>
<span class="lineno">49</span>     <span class="n">step</span> <span class="o">=</span> <span class="p">(</span><span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">/</span> <span class="n">nb_element</span>
<span class="lineno">50</span>     <span class="n">xdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span>
<span class="lineno">51</span> 
<span class="lineno">52</span>     <span class="c"># Get commit data with user as its own y data</span>
<span class="lineno">53</span>     <span class="n">user_commits</span> <span class="o">=</span> <span class="n">get_commit_data_of_user</span><span class="p">(</span><span class="n">changesets</span><span class="p">)</span>
<span class="lineno">54</span>     <span class="n">user_series</span> <span class="o">=</span> <span class="n">tally_data_series</span><span class="p">(</span><span class="n">xdata</span><span class="p">,</span> <span class="n">user_commits</span><span class="p">,</span> <span class="n">nb_element</span><span class="p">)</span>
<span class="lineno">55</span> 
<span class="lineno">56</span>     <span class="n">tooltip_date</span> <span class="o">=</span> <span class="s">&quot;%b </span><span class="si">%d</span><span class="s"> %Y&quot;</span>
<span class="lineno">57</span>     <span class="n">extra_serie</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;tooltip&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s">&quot;y_start&quot;</span><span class="p">:</span> <span class="s">&quot;Pushed &quot;</span><span class="p">,</span> <span class="s">&quot;y_end&quot;</span><span class="p">:</span> <span class="s">&quot; commits&quot;</span><span class="p">},</span>
<span class="lineno">58</span>                     <span class="s">&quot;date_format&quot;</span><span class="p">:</span> <span class="n">tooltip_date</span><span class="p">}</span>
<span class="lineno">59</span> 
<span class="lineno">60</span>     <span class="c"># Add each user commit breakdown into chart data</span>
<span class="lineno">61</span>     <span class="n">chartdata</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="n">xdata</span><span class="p">,</span> <span class="s">&#39;extra1&#39;</span><span class="p">:</span> <span class="n">extra_serie</span> <span class="p">}</span>
<span class="lineno">62</span>     <span class="n">user_count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="lineno">63</span>     <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">user_series</span><span class="p">:</span>
<span class="lineno">64</span>         <span class="n">user_count</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="lineno">65</span>         <span class="n">ydata</span> <span class="o">=</span> <span class="n">user_series</span><span class="p">[</span><span class="n">user</span><span class="p">]</span>
<span class="lineno">66</span>         <span class="n">string_count</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">user_count</span><span class="p">)</span>
<span class="lineno">67</span>         <span class="n">chartdata</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="o">+</span><span class="n">string_count</span><span class="p">]</span> <span class="o">=</span> <span class="n">user</span>
<span class="lineno">68</span>         <span class="n">chartdata</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="o">+</span><span class="n">string_count</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydata</span>
<span class="lineno">69</span>         <span class="n">chartdata</span><span class="p">[</span><span class="s">&#39;extra&#39;</span><span class="o">+</span><span class="n">string_count</span><span class="p">]</span> <span class="o">=</span> <span class="n">extra_serie</span>
<span class="lineno">70</span> 
<span class="lineno">71</span>     <span class="n">charttype</span> <span class="o">=</span> <span class="s">&quot;lineChart&quot;</span>
<span class="lineno">72</span>     <span class="n">chartcontainer</span> <span class="o">=</span> <span class="s">&#39;linechart_container&#39;</span>
<span class="lineno">73</span> 
<span class="lineno">74</span>     <span class="k">return</span> <span class="p">{</span>
<span class="lineno">75</span>         <span class="s">&#39;charttype&#39;</span><span class="p">:</span> <span class="n">charttype</span><span class="p">,</span>
<span class="lineno">76</span>         <span class="s">&#39;chartdata&#39;</span><span class="p">:</span> <span class="n">chartdata</span><span class="p">,</span>
<span class="lineno">77</span>         <span class="s">&#39;chartcontainer&#39;</span><span class="p">:</span> <span class="n">chartcontainer</span><span class="p">,</span>
<span class="lineno">78</span>         <span class="s">&#39;extra&#39;</span><span class="p">:</span> <span class="p">{</span>
<span class="lineno">79</span>             <span class="s">&#39;x_is_date&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="lineno">80</span>             <span class="s">&#39;x_axis_format&#39;</span><span class="p">:</span> <span class="s">&#39;%b </span><span class="si">%d</span><span class="s">&#39;</span><span class="p">,</span>
<span class="lineno">81</span>             <span class="s">&#39;tag_script_js&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="lineno">82</span>             <span class="s">&#39;jquery_on_ready&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
<span class="lineno">83</span>             <span class="p">}}</span>
</code></pre></div>

<h4 id="challenges">Challenges</h4>

<p>One of the main challenges faced on this project was the bottleneck of pulling all of the comment data from a repository. Due to the restriction of the comments endpoint on Bitbucket’s API, comments have to be retrieved one at a time for a given issue - something which became time-consuming for repositories with a large amount of issues. </p>

<p>After a few days of searching, we realised that if there is a way to send all of these requests asynchronously, it would drastically speed up the performance of generating the comment tallies on our reports. Then it hit us: Python has a great library for making asynchronous calls: <code>grequests</code>. After some experimentation, we were able to solve this bottleneck with the following solution:</p>

<div class="highlight"><pre><code class="python"><span class="k">def</span> <span class="nf">send_async_bitbucket_requests</span><span class="p">(</span><span class="n">req_urls</span><span class="p">,</span> <span class="n">auth_tokens</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use this method to send asynchronous requests for bitbucket</span>
<span class="sd">    API when generating reports.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - req_urls: List (of URLS)</span>
<span class="sd">    - auth_tokens: OAuth1</span>

<span class="sd">    Returns =&gt; List (JSON Dictionaries)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">(</span><span class="n">grequests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">auth</span><span class="o">=</span><span class="n">auth_tokens</span><span class="p">)</span> <span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">req_urls</span><span class="p">)</span>
    <span class="n">json_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">grequests</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">urls</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">json_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">json_list</span><span class="o">.</span><span class="n">append</span><span class="p">({})</span>
    <span class="k">return</span> <span class="n">json_list</span>
</code></pre></div>

<h4 id="experiences">Experiences</h4>

<p>Once production day came, our team presented Technetium to our class and it was a success. The idea of having reports were great for all classmates who were scrum masters/product owners of their respective groups, and Technetium was used all around. </p>

<p>Not only did we meet all of our feature requirements, Technetium also has complete documentation and is contains a test coverage rate of 98% through the use of <code>nosetests</code> and Python’s <code>unittest</code> library. </p>

<p>Working on this project opened my eyes to the power of Django and Web Applications in general, and also helped to improve my Python skills dramatically. Technetium for Bitbucket is only the beginning - there are future plans to explore Github’s API and look to integrate Technetium as a centralized platform which can aggregate data from both Bitbucket and Github.</p>


    </section>

</div>

        <footer>

                <img class="avatar" src="https://en.gravatar.com/userimage/39972947/394bc3bd457c88f378f080eee8c1edc9.jpg" alt="Me" />

                <p>New personal web page of David Leonard. Engineer, Programmer and Enthusiast.</p>
                <p><a href="http://github.com/DrkSephy">github</a> | <a href="http://bitbucket.org/DrkSephy">bitbucket</a> | <a href="https://www.linkedin.com/profile/view?id=199545939&trk=nav_responsive_tab_profile">linkedin</a></p>

                <p>
                    <small>©2014 David Leonard </small><br />
                    <small>Made with <a href="http://jekyllrb.com/">Jekyll</a> &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small>
                </p>
        </footer>
    </div>

    <body>
    
    <script src="/js/scale.fix.js"></script>
  </body>

</body>
</html>